{"version":3,"sources":["webpack:///./node_modules/echarts/lib/data/Tree.js","webpack:///./node_modules/echarts/lib/data/helper/linkList.js","webpack:///./node_modules/echarts/lib/chart/sunburst/SunburstView.js","webpack:///./src/components/RaceData.vue?6cfe","webpack:///./node_modules/echarts/lib/chart/sunburst/sunburstAction.js","webpack:///./node_modules/echarts/lib/chart/sunburst/SunburstPiece.js","webpack:///./node_modules/echarts/lib/chart/helper/treeHelper.js","webpack:///./src/components/RaceData.vue?5009","webpack:///src/components/RaceData.vue","webpack:///./src/components/RaceData.vue?b26d","webpack:///./src/components/RaceData.vue?abe5","webpack:///./node_modules/echarts/lib/chart/sunburst/SunburstSeries.js","webpack:///./node_modules/echarts/lib/chart/sunburst/sunburstLayout.js","webpack:///./node_modules/echarts/lib/chart/sunburst.js"],"names":["zrUtil","Model","linkList","List","createDimensions","TreeNode","name","hostTree","this","depth","height","parentNode","dataIndex","children","viewChildren","Tree","hostModel","levelOptions","leavesOption","root","data","_nodes","levelModels","map","levelDefine","ecModel","leavesModel","addChild","child","node","push","prototype","constructor","isRemoved","eachNode","options","cb","context","isString","order","suppressVisitSub","attr","call","i","length","updateDepthAndHeight","getNodeById","id","getId","len","res","contains","getAncestors","includeSelf","ancestors","reverse","getValue","dimension","get","getDimension","setLayout","layout","merge","setItemLayout","getLayout","getItemLayout","getModel","path","itemModel","getItemModel","levelModel","getLevelModel","isExpand","getLeavesModel","setVisual","key","value","setItemVisual","getVisual","ignoreParent","getItemVisual","getRawIndex","isAncestorOf","parent","isDescendantOf","type","getNodeByDataIndex","rawIndex","getNodeByName","update","nodes","count","clearLayouts","clearItemLayouts","createTree","dataRoot","treeOptions","beforeLink","tree","levels","leaves","listData","dimMax","buildHierarchy","dataNode","Math","max","isArray","dimensionsInfo","coordDimensions","dimensionsCount","list","initData","mainData","struct","structAttr","_default","module","exports","each","DATAS","MAIN_DATA","opt","datas","main","datasAttr","linkAll","TRANSFERABLE_METHODS","methodName","wrapMethod","curry","transferInjection","cloneShallowInjection","CHANGABLE_METHODS","changeInjection","assert","dataType","isMainData","extend","linkSingle","cloneShallow","getLinkedData","ChartView","SunburstPiece","DataDiffer","ROOT_TO_NODE_ACTION","SunburstView","init","render","seriesModel","api","payload","that","getData","virtualRoot","newRoot","getViewRoot","group","renderLabelForZeroData","newChildren","oldChildren","_oldChildren","dualTravel","renderRollUp","highlight","piece","highlightPolicy","getShallow","onEmphasis","unhighlight","virtualPiece","onNormal","getKey","processNode","newId","oldId","newNode","oldNode","doRenderNode","add","remove","execute","updateData","setItemGraphicEl","removeNode","viewRoot","_onclickEvent","off","event","e","_rootToNode","on","_initEvents","dispose","targetFound","childAt","target","nodeClick","link","linkTarget","window","open","dispatchAction","from","uid","seriesId","targetNode","containPoint","point","treeRoot","itemLayout","dx","cx","dy","cy","radius","sqrt","r","r0","echarts","helper","registerAction","handleRootToNode","model","index","targetInfo","retrieveTargetInfo","originViewRoot","direction","aboveViewRoot","resetViewRoot","eachComponent","mainType","subType","query","HIGHLIGHT_ACTION","handleHighlight","UNHIGHLIGHT_ACTION","handleUnhighlight","graphic","NodeHighlightPolicy","NONE","DESCENDANT","ANCESTOR","SELF","DEFAULT_SECTOR_Z","DEFAULT_TEXT_Z","Group","sector","Sector","z2","seriesIndex","text","Text","silent","ignore","hoverIgnore","normalIgnore","SunburstPieceProto","firstCreate","state","_seriesModel","_ecModel","sectorShape","label","visualColor","getNodeColor","fillDefaultColor","style","normalStyle","getItemStyle","stateStyle","defaults","lineJoin","fill","setShape","shape","updateProps","useStyle","_updateLabel","cursorStyle","n","isNodeHighlighted","trigger","onHighlight","onDownplay","normalModel","labelModel","labelHoverModel","retrieve","getFormattedLabel","getLabelAttr","labelMinAngle","PI","angle","endAngle","startAngle","abs","setLabelStyle","hoverStyle","defaultText","autoColor","useInsideStyle","midAngle","cos","sin","labelPosition","labelPadding","textAlign","textVerticalAlign","opacity","textX","textY","rotateType","rotate","stateAttr","isAnimationEnabled","inherits","visualMetaList","color","option","getRootId","ancestor","indexOf","activeNode","policy","validPayloadTypes","targetNodeId","getPathToRoot","viewPath","wrapTreePathInfo","treePathInfo","nodeDataIndex","getRawValue","_vm","_h","$createElement","_c","_self","staticClass","attrs","raceOption","staticRenderFns","mixins","common","components","ECharts","props","placement","Number","default","startDate","Date","endDate","raceList","windowWidth","computed","playerId","parseInt","sessionStorage","getItem","watch","get_race_info","mounted","addEventListener","onResize","beforeDestroy","removeEventListener","methods","set_option","forEach","el","race","first_race","i18n","itemStyle","race_index","tooltip","formatter","grid","width","series","sort","position","padding","innerWidth","component","SeriesModel","_treeHelper","_viewRoot","getInitialData","completeTreeValue","treeOption","optionUpdated","getDataParams","params","apply","arguments","defaultOption","zlevel","z","center","clockwise","minAngle","percentPrecision","stillShowZeroSum","show","align","distance","emphasis","borderWidth","borderColor","borderType","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","downplay","animationType","animationDuration","animationDurationUpdate","animationEasing","getRawData","sum","childValue","thisValue","isNaN","_number","parsePercent","RADIAN","seriesType","eachSeriesByType","getWidth","getHeight","size","min","rootDepth","initChildren","validDataCount","unitRadian","renderRollupNode","rPerLevel","dir","renderNode","rStart","rEnd","siblingAngle","isAsc","sortOrder","a","b","diff","dataColor","sunburstLayout","dataFilter","registerVisual","registerLayout","registerProcessor"],"mappings":"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","file":"js/chunk-54f75f54.b671f87c.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../model/Model\");\n\nvar linkList = require(\"./helper/linkList\");\n\nvar List = require(\"./List\");\n\nvar createDimensions = require(\"./helper/createDimensions\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Tree data structure\n *\n * @module echarts/data/Tree\n */\n\n/**\n * @constructor module:echarts/data/Tree~TreeNode\n * @param {string} name\n * @param {module:echarts/data/Tree} hostTree\n */\nvar TreeNode = function (name, hostTree) {\n  /**\n   * @type {string}\n   */\n  this.name = name || '';\n  /**\n   * Depth of node\n   *\n   * @type {number}\n   * @readOnly\n   */\n\n  this.depth = 0;\n  /**\n   * Height of the subtree rooted at this node.\n   * @type {number}\n   * @readOnly\n   */\n\n  this.height = 0;\n  /**\n   * @type {module:echarts/data/Tree~TreeNode}\n   * @readOnly\n   */\n\n  this.parentNode = null;\n  /**\n   * Reference to list item.\n   * Do not persistent dataIndex outside,\n   * besause it may be changed by list.\n   * If dataIndex -1,\n   * this node is logical deleted (filtered) in list.\n   *\n   * @type {Object}\n   * @readOnly\n   */\n\n  this.dataIndex = -1;\n  /**\n   * @type {Array.<module:echarts/data/Tree~TreeNode>}\n   * @readOnly\n   */\n\n  this.children = [];\n  /**\n   * @type {Array.<module:echarts/data/Tree~TreeNode>}\n   * @pubilc\n   */\n\n  this.viewChildren = [];\n  /**\n   * @type {moduel:echarts/data/Tree}\n   * @readOnly\n   */\n\n  this.hostTree = hostTree;\n};\n\nTreeNode.prototype = {\n  constructor: TreeNode,\n\n  /**\n   * The node is removed.\n   * @return {boolean} is removed.\n   */\n  isRemoved: function () {\n    return this.dataIndex < 0;\n  },\n\n  /**\n   * Travel this subtree (include this node).\n   * Usage:\n   *    node.eachNode(function () { ... }); // preorder\n   *    node.eachNode('preorder', function () { ... }); // preorder\n   *    node.eachNode('postorder', function () { ... }); // postorder\n   *    node.eachNode(\n   *        {order: 'postorder', attr: 'viewChildren'},\n   *        function () { ... }\n   *    ); // postorder\n   *\n   * @param {(Object|string)} options If string, means order.\n   * @param {string=} options.order 'preorder' or 'postorder'\n   * @param {string=} options.attr 'children' or 'viewChildren'\n   * @param {Function} cb If in preorder and return false,\n   *                      its subtree will not be visited.\n   * @param {Object} [context]\n   */\n  eachNode: function (options, cb, context) {\n    if (typeof options === 'function') {\n      context = cb;\n      cb = options;\n      options = null;\n    }\n\n    options = options || {};\n\n    if (zrUtil.isString(options)) {\n      options = {\n        order: options\n      };\n    }\n\n    var order = options.order || 'preorder';\n    var children = this[options.attr || 'children'];\n    var suppressVisitSub;\n    order === 'preorder' && (suppressVisitSub = cb.call(context, this));\n\n    for (var i = 0; !suppressVisitSub && i < children.length; i++) {\n      children[i].eachNode(options, cb, context);\n    }\n\n    order === 'postorder' && cb.call(context, this);\n  },\n\n  /**\n   * Update depth and height of this subtree.\n   *\n   * @param  {number} depth\n   */\n  updateDepthAndHeight: function (depth) {\n    var height = 0;\n    this.depth = depth;\n\n    for (var i = 0; i < this.children.length; i++) {\n      var child = this.children[i];\n      child.updateDepthAndHeight(depth + 1);\n\n      if (child.height > height) {\n        height = child.height;\n      }\n    }\n\n    this.height = height + 1;\n  },\n\n  /**\n   * @param  {string} id\n   * @return {module:echarts/data/Tree~TreeNode}\n   */\n  getNodeById: function (id) {\n    if (this.getId() === id) {\n      return this;\n    }\n\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\n      var res = children[i].getNodeById(id);\n\n      if (res) {\n        return res;\n      }\n    }\n  },\n\n  /**\n   * @param {module:echarts/data/Tree~TreeNode} node\n   * @return {boolean}\n   */\n  contains: function (node) {\n    if (node === this) {\n      return true;\n    }\n\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\n      var res = children[i].contains(node);\n\n      if (res) {\n        return res;\n      }\n    }\n  },\n\n  /**\n   * @param {boolean} includeSelf Default false.\n   * @return {Array.<module:echarts/data/Tree~TreeNode>} order: [root, child, grandchild, ...]\n   */\n  getAncestors: function (includeSelf) {\n    var ancestors = [];\n    var node = includeSelf ? this : this.parentNode;\n\n    while (node) {\n      ancestors.push(node);\n      node = node.parentNode;\n    }\n\n    ancestors.reverse();\n    return ancestors;\n  },\n\n  /**\n   * @param {string|Array=} [dimension='value'] Default 'value'. can be 0, 1, 2, 3\n   * @return {number} Value.\n   */\n  getValue: function (dimension) {\n    var data = this.hostTree.data;\n    return data.get(data.getDimension(dimension || 'value'), this.dataIndex);\n  },\n\n  /**\n   * @param {Object} layout\n   * @param {boolean=} [merge=false]\n   */\n  setLayout: function (layout, merge) {\n    this.dataIndex >= 0 && this.hostTree.data.setItemLayout(this.dataIndex, layout, merge);\n  },\n\n  /**\n   * @return {Object} layout\n   */\n  getLayout: function () {\n    return this.hostTree.data.getItemLayout(this.dataIndex);\n  },\n\n  /**\n   * @param {string} [path]\n   * @return {module:echarts/model/Model}\n   */\n  getModel: function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n\n    var hostTree = this.hostTree;\n    var itemModel = hostTree.data.getItemModel(this.dataIndex);\n    var levelModel = this.getLevelModel();\n    var leavesModel;\n\n    if (!levelModel && (this.children.length === 0 || this.children.length !== 0 && this.isExpand === false)) {\n      leavesModel = this.getLeavesModel();\n    }\n\n    return itemModel.getModel(path, (levelModel || leavesModel || hostTree.hostModel).getModel(path));\n  },\n\n  /**\n   * @return {module:echarts/model/Model}\n   */\n  getLevelModel: function () {\n    return (this.hostTree.levelModels || [])[this.depth];\n  },\n\n  /**\n   * @return {module:echarts/model/Model}\n   */\n  getLeavesModel: function () {\n    return this.hostTree.leavesModel;\n  },\n\n  /**\n   * @example\n   *  setItemVisual('color', color);\n   *  setItemVisual({\n   *      'color': color\n   *  });\n   */\n  setVisual: function (key, value) {\n    this.dataIndex >= 0 && this.hostTree.data.setItemVisual(this.dataIndex, key, value);\n  },\n\n  /**\n   * Get item visual\n   */\n  getVisual: function (key, ignoreParent) {\n    return this.hostTree.data.getItemVisual(this.dataIndex, key, ignoreParent);\n  },\n\n  /**\n   * @public\n   * @return {number}\n   */\n  getRawIndex: function () {\n    return this.hostTree.data.getRawIndex(this.dataIndex);\n  },\n\n  /**\n   * @public\n   * @return {string}\n   */\n  getId: function () {\n    return this.hostTree.data.getId(this.dataIndex);\n  },\n\n  /**\n   * if this is an ancestor of another node\n   *\n   * @public\n   * @param {TreeNode} node another node\n   * @return {boolean} if is ancestor\n   */\n  isAncestorOf: function (node) {\n    var parent = node.parentNode;\n\n    while (parent) {\n      if (parent === this) {\n        return true;\n      }\n\n      parent = parent.parentNode;\n    }\n\n    return false;\n  },\n\n  /**\n   * if this is an descendant of another node\n   *\n   * @public\n   * @param {TreeNode} node another node\n   * @return {boolean} if is descendant\n   */\n  isDescendantOf: function (node) {\n    return node !== this && node.isAncestorOf(this);\n  }\n};\n/**\n * @constructor\n * @alias module:echarts/data/Tree\n * @param {module:echarts/model/Model} hostModel\n * @param {Array.<Object>} levelOptions\n * @param {Object} leavesOption\n */\n\nfunction Tree(hostModel, levelOptions, leavesOption) {\n  /**\n   * @type {module:echarts/data/Tree~TreeNode}\n   * @readOnly\n   */\n  this.root;\n  /**\n   * @type {module:echarts/data/List}\n   * @readOnly\n   */\n\n  this.data;\n  /**\n   * Index of each item is the same as the raw index of coresponding list item.\n   * @private\n   * @type {Array.<module:echarts/data/Tree~TreeNode}\n   */\n\n  this._nodes = [];\n  /**\n   * @private\n   * @readOnly\n   * @type {module:echarts/model/Model}\n   */\n\n  this.hostModel = hostModel;\n  /**\n   * @private\n   * @readOnly\n   * @type {Array.<module:echarts/model/Model}\n   */\n\n  this.levelModels = zrUtil.map(levelOptions || [], function (levelDefine) {\n    return new Model(levelDefine, hostModel, hostModel.ecModel);\n  });\n  this.leavesModel = new Model(leavesOption || {}, hostModel, hostModel.ecModel);\n}\n\nTree.prototype = {\n  constructor: Tree,\n  type: 'tree',\n\n  /**\n   * Travel this subtree (include this node).\n   * Usage:\n   *    node.eachNode(function () { ... }); // preorder\n   *    node.eachNode('preorder', function () { ... }); // preorder\n   *    node.eachNode('postorder', function () { ... }); // postorder\n   *    node.eachNode(\n   *        {order: 'postorder', attr: 'viewChildren'},\n   *        function () { ... }\n   *    ); // postorder\n   *\n   * @param {(Object|string)} options If string, means order.\n   * @param {string=} options.order 'preorder' or 'postorder'\n   * @param {string=} options.attr 'children' or 'viewChildren'\n   * @param {Function} cb\n   * @param {Object}   [context]\n   */\n  eachNode: function (options, cb, context) {\n    this.root.eachNode(options, cb, context);\n  },\n\n  /**\n   * @param {number} dataIndex\n   * @return {module:echarts/data/Tree~TreeNode}\n   */\n  getNodeByDataIndex: function (dataIndex) {\n    var rawIndex = this.data.getRawIndex(dataIndex);\n    return this._nodes[rawIndex];\n  },\n\n  /**\n   * @param {string} name\n   * @return {module:echarts/data/Tree~TreeNode}\n   */\n  getNodeByName: function (name) {\n    return this.root.getNodeByName(name);\n  },\n\n  /**\n   * Update item available by list,\n   * when list has been performed options like 'filterSelf' or 'map'.\n   */\n  update: function () {\n    var data = this.data;\n    var nodes = this._nodes;\n\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].dataIndex = -1;\n    }\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      nodes[data.getRawIndex(i)].dataIndex = i;\n    }\n  },\n\n  /**\n   * Clear all layouts\n   */\n  clearLayouts: function () {\n    this.data.clearItemLayouts();\n  }\n};\n/**\n * data node format:\n * {\n *     name: ...\n *     value: ...\n *     children: [\n *         {\n *             name: ...\n *             value: ...\n *             children: ...\n *         },\n *         ...\n *     ]\n * }\n *\n * @static\n * @param {Object} dataRoot Root node.\n * @param {module:echarts/model/Model} hostModel\n * @param {Object} treeOptions\n * @param {Array.<Object>} treeOptions.levels\n * @param {Array.<Object>} treeOptions.leaves\n * @return module:echarts/data/Tree\n */\n\nTree.createTree = function (dataRoot, hostModel, treeOptions, beforeLink) {\n  var tree = new Tree(hostModel, treeOptions.levels, treeOptions.leaves);\n  var listData = [];\n  var dimMax = 1;\n  buildHierarchy(dataRoot);\n\n  function buildHierarchy(dataNode, parentNode) {\n    var value = dataNode.value;\n    dimMax = Math.max(dimMax, zrUtil.isArray(value) ? value.length : 1);\n    listData.push(dataNode);\n    var node = new TreeNode(dataNode.name, tree);\n    parentNode ? addChild(node, parentNode) : tree.root = node;\n\n    tree._nodes.push(node);\n\n    var children = dataNode.children;\n\n    if (children) {\n      for (var i = 0; i < children.length; i++) {\n        buildHierarchy(children[i], node);\n      }\n    }\n  }\n\n  tree.root.updateDepthAndHeight(0);\n  var dimensionsInfo = createDimensions(listData, {\n    coordDimensions: ['value'],\n    dimensionsCount: dimMax\n  });\n  var list = new List(dimensionsInfo, hostModel);\n  list.initData(listData);\n  linkList({\n    mainData: list,\n    struct: tree,\n    structAttr: 'tree'\n  });\n  tree.update();\n  beforeLink && beforeLink(list);\n  return tree;\n};\n/**\n * It is needed to consider the mess of 'list', 'hostModel' when creating a TreeNote,\n * so this function is not ready and not necessary to be public.\n *\n * @param {(module:echarts/data/Tree~TreeNode|Object)} child\n */\n\n\nfunction addChild(child, node) {\n  var children = node.children;\n\n  if (child.parentNode === node) {\n    return;\n  }\n\n  children.push(child);\n  child.parentNode = node;\n}\n\nvar _default = Tree;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Link lists and struct (graph or tree)\n */\nvar each = zrUtil.each;\nvar DATAS = '\\0__link_datas';\nvar MAIN_DATA = '\\0__link_mainData'; // Caution:\n// In most case, either list or its shallow clones (see list.cloneShallow)\n// is active in echarts process. So considering heap memory consumption,\n// we do not clone tree or graph, but share them among list and its shallow clones.\n// But in some rare case, we have to keep old list (like do animation in chart). So\n// please take care that both the old list and the new list share the same tree/graph.\n\n/**\n * @param {Object} opt\n * @param {module:echarts/data/List} opt.mainData\n * @param {Object} [opt.struct] For example, instance of Graph or Tree.\n * @param {string} [opt.structAttr] designation: list[structAttr] = struct;\n * @param {Object} [opt.datas] {dataType: data},\n *                 like: {node: nodeList, edge: edgeList}.\n *                 Should contain mainData.\n * @param {Object} [opt.datasAttr] {dataType: attr},\n *                 designation: struct[datasAttr[dataType]] = list;\n */\n\nfunction linkList(opt) {\n  var mainData = opt.mainData;\n  var datas = opt.datas;\n\n  if (!datas) {\n    datas = {\n      main: mainData\n    };\n    opt.datasAttr = {\n      main: 'data'\n    };\n  }\n\n  opt.datas = opt.mainData = null;\n  linkAll(mainData, datas, opt); // Porxy data original methods.\n\n  each(datas, function (data) {\n    each(mainData.TRANSFERABLE_METHODS, function (methodName) {\n      data.wrapMethod(methodName, zrUtil.curry(transferInjection, opt));\n    });\n  }); // Beyond transfer, additional features should be added to `cloneShallow`.\n\n  mainData.wrapMethod('cloneShallow', zrUtil.curry(cloneShallowInjection, opt)); // Only mainData trigger change, because struct.update may trigger\n  // another changable methods, which may bring about dead lock.\n\n  each(mainData.CHANGABLE_METHODS, function (methodName) {\n    mainData.wrapMethod(methodName, zrUtil.curry(changeInjection, opt));\n  }); // Make sure datas contains mainData.\n\n  zrUtil.assert(datas[mainData.dataType] === mainData);\n}\n\nfunction transferInjection(opt, res) {\n  if (isMainData(this)) {\n    // Transfer datas to new main data.\n    var datas = zrUtil.extend({}, this[DATAS]);\n    datas[this.dataType] = res;\n    linkAll(res, datas, opt);\n  } else {\n    // Modify the reference in main data to point newData.\n    linkSingle(res, this.dataType, this[MAIN_DATA], opt);\n  }\n\n  return res;\n}\n\nfunction changeInjection(opt, res) {\n  opt.struct && opt.struct.update(this);\n  return res;\n}\n\nfunction cloneShallowInjection(opt, res) {\n  // cloneShallow, which brings about some fragilities, may be inappropriate\n  // to be exposed as an API. So for implementation simplicity we can make\n  // the restriction that cloneShallow of not-mainData should not be invoked\n  // outside, but only be invoked here.\n  each(res[DATAS], function (data, dataType) {\n    data !== res && linkSingle(data.cloneShallow(), dataType, res, opt);\n  });\n  return res;\n}\n/**\n * Supplement method to List.\n *\n * @public\n * @param {string} [dataType] If not specified, return mainData.\n * @return {module:echarts/data/List}\n */\n\n\nfunction getLinkedData(dataType) {\n  var mainData = this[MAIN_DATA];\n  return dataType == null || mainData == null ? mainData : mainData[DATAS][dataType];\n}\n\nfunction isMainData(data) {\n  return data[MAIN_DATA] === data;\n}\n\nfunction linkAll(mainData, datas, opt) {\n  mainData[DATAS] = {};\n  each(datas, function (data, dataType) {\n    linkSingle(data, dataType, mainData, opt);\n  });\n}\n\nfunction linkSingle(data, dataType, mainData, opt) {\n  mainData[DATAS][dataType] = data;\n  data[MAIN_DATA] = mainData;\n  data.dataType = dataType;\n\n  if (opt.struct) {\n    data[opt.structAttr] = opt.struct;\n    opt.struct[opt.datasAttr[dataType]] = data;\n  } // Supplement method.\n\n\n  data.getLinkedData = getLinkedData;\n}\n\nvar _default = linkList;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar ChartView = require(\"../../view/Chart\");\n\nvar SunburstPiece = require(\"./SunburstPiece\");\n\nvar DataDiffer = require(\"../../data/DataDiffer\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar ROOT_TO_NODE_ACTION = 'sunburstRootToNode';\nvar SunburstView = ChartView.extend({\n  type: 'sunburst',\n  init: function () {},\n  render: function (seriesModel, ecModel, api, payload) {\n    var that = this;\n    this.seriesModel = seriesModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    var data = seriesModel.getData();\n    var virtualRoot = data.tree.root;\n    var newRoot = seriesModel.getViewRoot();\n    var group = this.group;\n    var renderLabelForZeroData = seriesModel.get('renderLabelForZeroData');\n    var newChildren = [];\n    newRoot.eachNode(function (node) {\n      newChildren.push(node);\n    });\n    var oldChildren = this._oldChildren || [];\n    dualTravel(newChildren, oldChildren);\n    renderRollUp(virtualRoot, newRoot);\n\n    if (payload && payload.highlight && payload.highlight.piece) {\n      var highlightPolicy = seriesModel.getShallow('highlightPolicy');\n      payload.highlight.piece.onEmphasis(highlightPolicy);\n    } else if (payload && payload.unhighlight) {\n      var piece = this.virtualPiece;\n\n      if (!piece && virtualRoot.children.length) {\n        piece = virtualRoot.children[0].piece;\n      }\n\n      if (piece) {\n        piece.onNormal();\n      }\n    }\n\n    this._initEvents();\n\n    this._oldChildren = newChildren;\n\n    function dualTravel(newChildren, oldChildren) {\n      if (newChildren.length === 0 && oldChildren.length === 0) {\n        return;\n      }\n\n      new DataDiffer(oldChildren, newChildren, getKey, getKey).add(processNode).update(processNode).remove(zrUtil.curry(processNode, null)).execute();\n\n      function getKey(node) {\n        return node.getId();\n      }\n\n      function processNode(newId, oldId) {\n        var newNode = newId == null ? null : newChildren[newId];\n        var oldNode = oldId == null ? null : oldChildren[oldId];\n        doRenderNode(newNode, oldNode);\n      }\n    }\n\n    function doRenderNode(newNode, oldNode) {\n      if (!renderLabelForZeroData && newNode && !newNode.getValue()) {\n        // Not render data with value 0\n        newNode = null;\n      }\n\n      if (newNode !== virtualRoot && oldNode !== virtualRoot) {\n        if (oldNode && oldNode.piece) {\n          if (newNode) {\n            // Update\n            oldNode.piece.updateData(false, newNode, 'normal', seriesModel, ecModel); // For tooltip\n\n            data.setItemGraphicEl(newNode.dataIndex, oldNode.piece);\n          } else {\n            // Remove\n            removeNode(oldNode);\n          }\n        } else if (newNode) {\n          // Add\n          var piece = new SunburstPiece(newNode, seriesModel, ecModel);\n          group.add(piece); // For tooltip\n\n          data.setItemGraphicEl(newNode.dataIndex, piece);\n        }\n      }\n    }\n\n    function removeNode(node) {\n      if (!node) {\n        return;\n      }\n\n      if (node.piece) {\n        group.remove(node.piece);\n        node.piece = null;\n      }\n    }\n\n    function renderRollUp(virtualRoot, viewRoot) {\n      if (viewRoot.depth > 0) {\n        // Render\n        if (that.virtualPiece) {\n          // Update\n          that.virtualPiece.updateData(false, virtualRoot, 'normal', seriesModel, ecModel);\n        } else {\n          // Add\n          that.virtualPiece = new SunburstPiece(virtualRoot, seriesModel, ecModel);\n          group.add(that.virtualPiece);\n        }\n\n        if (viewRoot.piece._onclickEvent) {\n          viewRoot.piece.off('click', viewRoot.piece._onclickEvent);\n        }\n\n        var event = function (e) {\n          that._rootToNode(viewRoot.parentNode);\n        };\n\n        viewRoot.piece._onclickEvent = event;\n        that.virtualPiece.on('click', event);\n      } else if (that.virtualPiece) {\n        // Remove\n        group.remove(that.virtualPiece);\n        that.virtualPiece = null;\n      }\n    }\n  },\n  dispose: function () {},\n\n  /**\n   * @private\n   */\n  _initEvents: function () {\n    var that = this;\n\n    var event = function (e) {\n      var targetFound = false;\n      var viewRoot = that.seriesModel.getViewRoot();\n      viewRoot.eachNode(function (node) {\n        if (!targetFound && node.piece && node.piece.childAt(0) === e.target) {\n          var nodeClick = node.getModel().get('nodeClick');\n\n          if (nodeClick === 'rootToNode') {\n            that._rootToNode(node);\n          } else if (nodeClick === 'link') {\n            var itemModel = node.getModel();\n            var link = itemModel.get('link');\n\n            if (link) {\n              var linkTarget = itemModel.get('target', true) || '_blank';\n              window.open(link, linkTarget);\n            }\n          }\n\n          targetFound = true;\n        }\n      });\n    };\n\n    if (this.group._onclickEvent) {\n      this.group.off('click', this.group._onclickEvent);\n    }\n\n    this.group.on('click', event);\n    this.group._onclickEvent = event;\n  },\n\n  /**\n   * @private\n   */\n  _rootToNode: function (node) {\n    if (node !== this.seriesModel.getViewRoot()) {\n      this.api.dispatchAction({\n        type: ROOT_TO_NODE_ACTION,\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        targetNode: node\n      });\n    }\n  },\n\n  /**\n   * @implement\n   */\n  containPoint: function (point, seriesModel) {\n    var treeRoot = seriesModel.getData();\n    var itemLayout = treeRoot.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  }\n});\nvar _default = SunburstView;\nmodule.exports = _default;","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RaceData.vue?vue&type=style&index=0&id=6cc0e22a&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RaceData.vue?vue&type=style&index=0&id=6cc0e22a&scoped=true&lang=scss&\"","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar helper = require(\"../helper/treeHelper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @file Sunburst action\n */\nvar ROOT_TO_NODE_ACTION = 'sunburstRootToNode';\necharts.registerAction({\n  type: ROOT_TO_NODE_ACTION,\n  update: 'updateView'\n}, function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'series',\n    subType: 'sunburst',\n    query: payload\n  }, handleRootToNode);\n\n  function handleRootToNode(model, index) {\n    var targetInfo = helper.retrieveTargetInfo(payload, [ROOT_TO_NODE_ACTION], model);\n\n    if (targetInfo) {\n      var originViewRoot = model.getViewRoot();\n\n      if (originViewRoot) {\n        payload.direction = helper.aboveViewRoot(originViewRoot, targetInfo.node) ? 'rollUp' : 'drillDown';\n      }\n\n      model.resetViewRoot(targetInfo.node);\n    }\n  }\n});\nvar HIGHLIGHT_ACTION = 'sunburstHighlight';\necharts.registerAction({\n  type: HIGHLIGHT_ACTION,\n  update: 'updateView'\n}, function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'series',\n    subType: 'sunburst',\n    query: payload\n  }, handleHighlight);\n\n  function handleHighlight(model, index) {\n    var targetInfo = helper.retrieveTargetInfo(payload, [HIGHLIGHT_ACTION], model);\n\n    if (targetInfo) {\n      payload.highlight = targetInfo.node;\n    }\n  }\n});\nvar UNHIGHLIGHT_ACTION = 'sunburstUnhighlight';\necharts.registerAction({\n  type: UNHIGHLIGHT_ACTION,\n  update: 'updateView'\n}, function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'series',\n    subType: 'sunburst',\n    query: payload\n  }, handleUnhighlight);\n\n  function handleUnhighlight(model, index) {\n    payload.unhighlight = true;\n  }\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar NodeHighlightPolicy = {\n  NONE: 'none',\n  // not downplay others\n  DESCENDANT: 'descendant',\n  ANCESTOR: 'ancestor',\n  SELF: 'self'\n};\nvar DEFAULT_SECTOR_Z = 2;\nvar DEFAULT_TEXT_Z = 4;\n/**\n * Sunburstce of Sunburst including Sector, Label, LabelLine\n * @constructor\n * @extends {module:zrender/graphic/Group}\n */\n\nfunction SunburstPiece(node, seriesModel, ecModel) {\n  graphic.Group.call(this);\n  var sector = new graphic.Sector({\n    z2: DEFAULT_SECTOR_Z\n  });\n  sector.seriesIndex = seriesModel.seriesIndex;\n  var text = new graphic.Text({\n    z2: DEFAULT_TEXT_Z,\n    silent: node.getModel('label').get('silent')\n  });\n  this.add(sector);\n  this.add(text);\n  this.updateData(true, node, 'normal', seriesModel, ecModel); // Hover to change label and labelLine\n\n  function onEmphasis() {\n    text.ignore = text.hoverIgnore;\n  }\n\n  function onNormal() {\n    text.ignore = text.normalIgnore;\n  }\n\n  this.on('emphasis', onEmphasis).on('normal', onNormal).on('mouseover', onEmphasis).on('mouseout', onNormal);\n}\n\nvar SunburstPieceProto = SunburstPiece.prototype;\n\nSunburstPieceProto.updateData = function (firstCreate, node, state, seriesModel, ecModel) {\n  this.node = node;\n  node.piece = this;\n  seriesModel = seriesModel || this._seriesModel;\n  ecModel = ecModel || this._ecModel;\n  var sector = this.childAt(0);\n  sector.dataIndex = node.dataIndex;\n  var itemModel = node.getModel();\n  var layout = node.getLayout(); // if (!layout) {\n  //     console.log(node.getLayout());\n  // }\n\n  var sectorShape = zrUtil.extend({}, layout);\n  sectorShape.label = null;\n  var visualColor = getNodeColor(node, seriesModel, ecModel);\n  fillDefaultColor(node, seriesModel, visualColor);\n  var normalStyle = itemModel.getModel('itemStyle').getItemStyle();\n  var style;\n\n  if (state === 'normal') {\n    style = normalStyle;\n  } else {\n    var stateStyle = itemModel.getModel(state + '.itemStyle').getItemStyle();\n    style = zrUtil.merge(stateStyle, normalStyle);\n  }\n\n  style = zrUtil.defaults({\n    lineJoin: 'bevel',\n    fill: style.fill || visualColor\n  }, style);\n\n  if (firstCreate) {\n    sector.setShape(sectorShape);\n    sector.shape.r = layout.r0;\n    graphic.updateProps(sector, {\n      shape: {\n        r: layout.r\n      }\n    }, seriesModel, node.dataIndex);\n    sector.useStyle(style);\n  } else if (typeof style.fill === 'object' && style.fill.type || typeof sector.style.fill === 'object' && sector.style.fill.type) {\n    // Disable animation for gradient since no interpolation method\n    // is supported for gradient\n    graphic.updateProps(sector, {\n      shape: sectorShape\n    }, seriesModel);\n    sector.useStyle(style);\n  } else {\n    graphic.updateProps(sector, {\n      shape: sectorShape,\n      style: style\n    }, seriesModel);\n  }\n\n  this._updateLabel(seriesModel, visualColor, state);\n\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && sector.attr('cursor', cursorStyle);\n\n  if (firstCreate) {\n    var highlightPolicy = seriesModel.getShallow('highlightPolicy');\n\n    this._initEvents(sector, node, seriesModel, highlightPolicy);\n  }\n\n  this._seriesModel = seriesModel || this._seriesModel;\n  this._ecModel = ecModel || this._ecModel;\n};\n\nSunburstPieceProto.onEmphasis = function (highlightPolicy) {\n  var that = this;\n  this.node.hostTree.root.eachNode(function (n) {\n    if (n.piece) {\n      if (that.node === n) {\n        n.piece.updateData(false, n, 'emphasis');\n      } else if (isNodeHighlighted(n, that.node, highlightPolicy)) {\n        n.piece.childAt(0).trigger('highlight');\n      } else if (highlightPolicy !== NodeHighlightPolicy.NONE) {\n        n.piece.childAt(0).trigger('downplay');\n      }\n    }\n  });\n};\n\nSunburstPieceProto.onNormal = function () {\n  this.node.hostTree.root.eachNode(function (n) {\n    if (n.piece) {\n      n.piece.updateData(false, n, 'normal');\n    }\n  });\n};\n\nSunburstPieceProto.onHighlight = function () {\n  this.updateData(false, this.node, 'highlight');\n};\n\nSunburstPieceProto.onDownplay = function () {\n  this.updateData(false, this.node, 'downplay');\n};\n\nSunburstPieceProto._updateLabel = function (seriesModel, visualColor, state) {\n  var itemModel = this.node.getModel();\n  var normalModel = itemModel.getModel('label');\n  var labelModel = state === 'normal' || state === 'emphasis' ? normalModel : itemModel.getModel(state + '.label');\n  var labelHoverModel = itemModel.getModel('emphasis.label');\n  var text = zrUtil.retrieve(seriesModel.getFormattedLabel(this.node.dataIndex, state, null, null, 'label'), this.node.name);\n\n  if (getLabelAttr('show') === false) {\n    text = '';\n  }\n\n  var layout = this.node.getLayout();\n  var labelMinAngle = labelModel.get('minAngle');\n\n  if (labelMinAngle == null) {\n    labelMinAngle = normalModel.get('minAngle');\n  }\n\n  labelMinAngle = labelMinAngle / 180 * Math.PI;\n  var angle = layout.endAngle - layout.startAngle;\n\n  if (labelMinAngle != null && Math.abs(angle) < labelMinAngle) {\n    // Not displaying text when angle is too small\n    text = '';\n  }\n\n  var label = this.childAt(1);\n  graphic.setLabelStyle(label.style, label.hoverStyle || {}, normalModel, labelHoverModel, {\n    defaultText: labelModel.getShallow('show') ? text : null,\n    autoColor: visualColor,\n    useInsideStyle: true\n  });\n  var midAngle = (layout.startAngle + layout.endAngle) / 2;\n  var dx = Math.cos(midAngle);\n  var dy = Math.sin(midAngle);\n  var r;\n  var labelPosition = getLabelAttr('position');\n  var labelPadding = getLabelAttr('distance') || 0;\n  var textAlign = getLabelAttr('align');\n\n  if (labelPosition === 'outside') {\n    r = layout.r + labelPadding;\n    textAlign = midAngle > Math.PI / 2 ? 'right' : 'left';\n  } else {\n    if (!textAlign || textAlign === 'center') {\n      r = (layout.r + layout.r0) / 2;\n      textAlign = 'center';\n    } else if (textAlign === 'left') {\n      r = layout.r0 + labelPadding;\n\n      if (midAngle > Math.PI / 2) {\n        textAlign = 'right';\n      }\n    } else if (textAlign === 'right') {\n      r = layout.r - labelPadding;\n\n      if (midAngle > Math.PI / 2) {\n        textAlign = 'left';\n      }\n    }\n  }\n\n  label.attr('style', {\n    text: text,\n    textAlign: textAlign,\n    textVerticalAlign: getLabelAttr('verticalAlign') || 'middle',\n    opacity: getLabelAttr('opacity')\n  });\n  var textX = r * dx + layout.cx;\n  var textY = r * dy + layout.cy;\n  label.attr('position', [textX, textY]);\n  var rotateType = getLabelAttr('rotate');\n  var rotate = 0;\n\n  if (rotateType === 'radial') {\n    rotate = -midAngle;\n\n    if (rotate < -Math.PI / 2) {\n      rotate += Math.PI;\n    }\n  } else if (rotateType === 'tangential') {\n    rotate = Math.PI / 2 - midAngle;\n\n    if (rotate > Math.PI / 2) {\n      rotate -= Math.PI;\n    } else if (rotate < -Math.PI / 2) {\n      rotate += Math.PI;\n    }\n  } else if (typeof rotateType === 'number') {\n    rotate = rotateType * Math.PI / 180;\n  }\n\n  label.attr('rotation', rotate);\n\n  function getLabelAttr(name) {\n    var stateAttr = labelModel.get(name);\n\n    if (stateAttr == null) {\n      return normalModel.get(name);\n    } else {\n      return stateAttr;\n    }\n  }\n};\n\nSunburstPieceProto._initEvents = function (sector, node, seriesModel, highlightPolicy) {\n  sector.off('mouseover').off('mouseout').off('emphasis').off('normal');\n  var that = this;\n\n  var onEmphasis = function () {\n    that.onEmphasis(highlightPolicy);\n  };\n\n  var onNormal = function () {\n    that.onNormal();\n  };\n\n  var onDownplay = function () {\n    that.onDownplay();\n  };\n\n  var onHighlight = function () {\n    that.onHighlight();\n  };\n\n  if (seriesModel.isAnimationEnabled()) {\n    sector.on('mouseover', onEmphasis).on('mouseout', onNormal).on('emphasis', onEmphasis).on('normal', onNormal).on('downplay', onDownplay).on('highlight', onHighlight);\n  }\n};\n\nzrUtil.inherits(SunburstPiece, graphic.Group);\nvar _default = SunburstPiece;\n/**\n * Get node color\n *\n * @param {TreeNode} node the node to get color\n * @param {module:echarts/model/Series} seriesModel series\n * @param {module:echarts/model/Global} ecModel echarts defaults\n */\n\nfunction getNodeColor(node, seriesModel, ecModel) {\n  // Color from visualMap\n  var visualColor = node.getVisual('color');\n  var visualMetaList = node.getVisual('visualMeta');\n\n  if (!visualMetaList || visualMetaList.length === 0) {\n    // Use first-generation color if has no visualMap\n    visualColor = null;\n  } // Self color or level color\n\n\n  var color = node.getModel('itemStyle').get('color');\n\n  if (color) {\n    return color;\n  } else if (visualColor) {\n    // Color mapping\n    return visualColor;\n  } else if (node.depth === 0) {\n    // Virtual root node\n    return ecModel.option.color[0];\n  } else {\n    // First-generation color\n    var length = ecModel.option.color.length;\n    color = ecModel.option.color[getRootId(node) % length];\n  }\n\n  return color;\n}\n/**\n * Get index of root in sorted order\n *\n * @param {TreeNode} node current node\n * @return {number} index in root\n */\n\n\nfunction getRootId(node) {\n  var ancestor = node;\n\n  while (ancestor.depth > 1) {\n    ancestor = ancestor.parentNode;\n  }\n\n  var virtualRoot = node.getAncestors()[0];\n  return zrUtil.indexOf(virtualRoot.children, ancestor);\n}\n\nfunction isNodeHighlighted(node, activeNode, policy) {\n  if (policy === NodeHighlightPolicy.NONE) {\n    return false;\n  } else if (policy === NodeHighlightPolicy.SELF) {\n    return node === activeNode;\n  } else if (policy === NodeHighlightPolicy.ANCESTOR) {\n    return node === activeNode || node.isAncestorOf(activeNode);\n  } else {\n    return node === activeNode || node.isDescendantOf(activeNode);\n  }\n} // Fix tooltip callback function params.color incorrect when pick a default color\n\n\nfunction fillDefaultColor(node, seriesModel, color) {\n  var data = seriesModel.getData();\n  data.setItemVisual(node.dataIndex, 'color', color);\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction retrieveTargetInfo(payload, validPayloadTypes, seriesModel) {\n  if (payload && zrUtil.indexOf(validPayloadTypes, payload.type) >= 0) {\n    var root = seriesModel.getData().tree.root;\n    var targetNode = payload.targetNode;\n\n    if (typeof targetNode === 'string') {\n      targetNode = root.getNodeById(targetNode);\n    }\n\n    if (targetNode && root.contains(targetNode)) {\n      return {\n        node: targetNode\n      };\n    }\n\n    var targetNodeId = payload.targetNodeId;\n\n    if (targetNodeId != null && (targetNode = root.getNodeById(targetNodeId))) {\n      return {\n        node: targetNode\n      };\n    }\n  }\n} // Not includes the given node at the last item.\n\n\nfunction getPathToRoot(node) {\n  var path = [];\n\n  while (node) {\n    node = node.parentNode;\n    node && path.push(node);\n  }\n\n  return path.reverse();\n}\n\nfunction aboveViewRoot(viewRoot, node) {\n  var viewPath = getPathToRoot(viewRoot);\n  return zrUtil.indexOf(viewPath, node) >= 0;\n} // From root to the input node (the input node will be included).\n\n\nfunction wrapTreePathInfo(node, seriesModel) {\n  var treePathInfo = [];\n\n  while (node) {\n    var nodeDataIndex = node.dataIndex;\n    treePathInfo.push({\n      name: node.name,\n      dataIndex: nodeDataIndex,\n      value: seriesModel.getRawValue(nodeDataIndex)\n    });\n    node = node.parentNode;\n  }\n\n  treePathInfo.reverse();\n  return treePathInfo;\n}\n\nexports.retrieveTargetInfo = retrieveTargetInfo;\nexports.getPathToRoot = getPathToRoot;\nexports.aboveViewRoot = aboveViewRoot;\nexports.wrapTreePathInfo = wrapTreePathInfo;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"race-data\"},[_c('div',{staticClass:\"chart-wrapper\"},[_c('v-chart',{staticClass:\"wide-center\",style:({'width': '100%', 'height': '800px'}),attrs:{\"options\":_vm.raceOption}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"race-data\">\r\n    <div class=\"chart-wrapper\">\r\n      <v-chart class=\"wide-center\" :options=\"raceOption\" :style=\"{'width': '100%', 'height': '800px'}\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ECharts from 'vue-echarts';\r\nimport i18n from '@/plugins/i18n';\r\n\r\nimport 'echarts/lib/chart/sunburst';\r\nimport 'echarts/lib/component/grid';\r\n//import 'echarts/lib/component/legend';\r\nimport 'echarts/lib/component/tooltip';\r\n\r\nimport common from '@/mixins/common';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'race-data',\r\n  mixins: [common],\r\n  components: {\r\n    'v-chart': ECharts\r\n  },\r\n  props: {\r\n    placement: {\r\n      type: Number,\r\n      default: 9\r\n    },\r\n    startDate: {\r\n      type: Date,\r\n      default: new Date('2020-02-27T00:00:00+09:00')\r\n    },\r\n    endDate: {\r\n      type: Date,\r\n      default: new Date()\r\n    }\r\n  },\r\n  data: () => {\r\n    return {\r\n      raceList: [],\r\n      raceOption: {},\r\n      windowWidth: 0\r\n    }\r\n  },\r\n  computed: {\r\n    playerId () {\r\n      return parseInt(sessionStorage.getItem('playerId'), 10);\r\n    }\r\n  },\r\n  watch: {\r\n    placement () {\r\n      this.get_race_info();\r\n    },\r\n    startDate () {\r\n      this.get_race_info();\r\n    },\r\n    endDate () {\r\n      this.get_race_info();\r\n    }\r\n  },\r\n  mounted () {\r\n    window.addEventListener('resize', this.onResize);\r\n    this.get_race_info();\r\n  },\r\n  beforeDestroy () {\r\n    window.removeEventListener('resize', this.onResize);\r\n  },\r\n  methods: {\r\n    async get_race_info () {\r\n      try {\r\n        const json = {\r\n          player_id: this.playerId,\r\n          start_date: this.getYYYY_MM_DD(this.startDate),\r\n          end_date: this.getYYYY_MM_DD(this.endDate),\r\n          placement: this.placement\r\n        };\r\n        let response = await axios.get('http://battlegroundlab.com/api/race.php' + this.jsonToParam(json));\r\n        if (response.data.resultJson.length > 0) {\r\n          this.raceList = response.data.resultJson;\r\n          this.set_option();\r\n        } else {\r\n          this.raceList = [];\r\n          this.set_option();\r\n        }\r\n      } catch(err) {\r\n        console.log(err);\r\n      }\r\n    },\r\n    set_option () {\r\n      let race_index = -1;\r\n      let datas = [];\r\n      let first_race = '';\r\n      this.raceList.forEach((el) => {\r\n        if (el.race != first_race) {\r\n          datas.push({\r\n            name: i18n.t(el.race),\r\n            itemStyle: { color: this.getRaceColor(el.race) },\r\n            children: [{\r\n              name: i18n.t(el.cid),\r\n              value: el.value,\r\n              itemStyle: { color: this.getRaceColor(el.race) }\r\n            }]\r\n          });\r\n          race_index++;\r\n          first_race = el.race;\r\n        } else {\r\n          datas[race_index].children.push({\r\n            name: i18n.t(el.cid),\r\n            value: el.value,\r\n            itemStyle: { color: this.getRaceColor(el.race) }\r\n          })\r\n        }\r\n      });\r\n\r\n      this.raceOption = {\r\n        tooltip: {\r\n          trigger: 'item',\r\n          formatter: '{b}: {c}'\r\n        },\r\n        grid: {\r\n          width: '100%',\r\n          height: 'auto'\r\n        },\r\n        series: {\r\n          type: 'sunburst',\r\n          highlightPolicy: 'ancestor',\r\n          data: datas,\r\n          radius: [0, '95%'],\r\n          sort: null,\r\n          levels: [{}, {\r\n              r0: '15%',\r\n              r: '35%',\r\n              itemStyle: {\r\n                  borderWidth: 2\r\n              },\r\n              label: {\r\n                  rotate: 'tangential'\r\n              }\r\n          },{\r\n            r0: '35%',\r\n            r: '70%',\r\n            label: {\r\n              position: 'outside',\r\n              padding: 3,\r\n              silent: false\r\n            }\r\n          }\r\n          /*\r\n          , {\r\n              r0: '70%',\r\n              r: '72%',\r\n              label: {\r\n                  position: 'outside',\r\n                  padding: 3,\r\n                  silent: false\r\n              },\r\n              itemStyle: {\r\n                  borderWidth: 3\r\n              }\r\n          }\r\n          */\r\n          ]\r\n        }\r\n      }\r\n    },\r\n    onResize () {\r\n      this.windowWidth = window.innerWidth;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import '@/scss/common.scss';\r\ndiv.chart-wrapper {\r\n  width: 100%;\r\n  min-height: 800px;\r\n}\r\n@media (max-width: 728px) {\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RaceData.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RaceData.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RaceData.vue?vue&type=template&id=6cc0e22a&scoped=true&\"\nimport script from \"./RaceData.vue?vue&type=script&lang=js&\"\nexport * from \"./RaceData.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RaceData.vue?vue&type=style&index=0&id=6cc0e22a&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6cc0e22a\",\n  null\n  \n)\n\nexport default component.exports","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar Tree = require(\"../../data/Tree\");\n\nvar _treeHelper = require(\"../helper/treeHelper\");\n\nvar wrapTreePathInfo = _treeHelper.wrapTreePathInfo;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = SeriesModel.extend({\n  type: 'series.sunburst',\n\n  /**\n   * @type {module:echarts/data/Tree~Node}\n   */\n  _viewRoot: null,\n  getInitialData: function (option, ecModel) {\n    // Create a virtual root.\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    completeTreeValue(root);\n    var levels = option.levels || []; // levels = option.levels = setDefault(levels, ecModel);\n\n    var treeOption = {};\n    treeOption.levels = levels; // Make sure always a new tree is created when setOption,\n    // in TreemapView, we check whether oldTree === newTree\n    // to choose mappings approach among old shapes and new shapes.\n\n    return Tree.createTree(root, this, treeOption).data;\n  },\n  optionUpdated: function () {\n    this.resetViewRoot();\n  },\n\n  /*\n   * @override\n   */\n  getDataParams: function (dataIndex) {\n    var params = SeriesModel.prototype.getDataParams.apply(this, arguments);\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treePathInfo = wrapTreePathInfo(node, this);\n    return params;\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    // 默认全局居中\n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // 默认顺时针\n    clockwise: true,\n    startAngle: 90,\n    // 最小角度改为0\n    minAngle: 0,\n    percentPrecision: 2,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // Policy of highlighting pieces when hover on one\n    // Valid values: 'none' (for not downplay others), 'descendant',\n    // 'ancestor', 'self'\n    highlightPolicy: 'descendant',\n    // 'rootToNode', 'link', or false\n    nodeClick: 'rootToNode',\n    renderLabelForZeroData: false,\n    label: {\n      // could be: 'radial', 'tangential', or 'none'\n      rotate: 'radial',\n      show: true,\n      opacity: 1,\n      // 'left' is for inner side of inside, and 'right' is for outter\n      // side for inside\n      align: 'center',\n      position: 'inside',\n      distance: 5,\n      silent: true,\n      emphasis: {}\n    },\n    itemStyle: {\n      borderWidth: 1,\n      borderColor: 'white',\n      borderType: 'solid',\n      shadowBlur: 0,\n      shadowColor: 'rgba(0, 0, 0, 0.2)',\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      opacity: 1,\n      emphasis: {},\n      highlight: {\n        opacity: 1\n      },\n      downplay: {\n        opacity: 0.9\n      }\n    },\n    // Animation type canbe expansion, scale\n    animationType: 'expansion',\n    animationDuration: 1000,\n    animationDurationUpdate: 500,\n    animationEasing: 'cubicOut',\n    data: [],\n    levels: [],\n\n    /**\n     * Sort order.\n     *\n     * Valid values: 'desc', 'asc', null, or callback function.\n     * 'desc' and 'asc' for descend and ascendant order;\n     * null for not sorting;\n     * example of callback function:\n     * function(nodeA, nodeB) {\n     *     return nodeA.getValue() - nodeB.getValue();\n     * }\n     */\n    sort: 'desc'\n  },\n  getViewRoot: function () {\n    return this._viewRoot;\n  },\n\n  /**\n   * @param {module:echarts/data/Tree~Node} [viewRoot]\n   */\n  resetViewRoot: function (viewRoot) {\n    viewRoot ? this._viewRoot = viewRoot : viewRoot = this._viewRoot;\n    var root = this.getRawData().tree.root;\n\n    if (!viewRoot || viewRoot !== root && !root.contains(viewRoot)) {\n      this._viewRoot = root;\n    }\n  }\n});\n/**\n * @param {Object} dataNode\n */\n\n\nfunction completeTreeValue(dataNode) {\n  // Postorder travel tree.\n  // If value of none-leaf node is not set,\n  // calculate it by suming up the value of all children.\n  var sum = 0;\n  zrUtil.each(dataNode.children, function (child) {\n    completeTreeValue(child);\n    var childValue = child.value;\n    zrUtil.isArray(childValue) && (childValue = childValue[0]);\n    sum += childValue;\n  });\n  var thisValue = dataNode.value;\n\n  if (zrUtil.isArray(thisValue)) {\n    thisValue = thisValue[0];\n  }\n\n  if (thisValue == null || isNaN(thisValue)) {\n    thisValue = sum;\n  } // Value should not less than 0.\n\n\n  if (thisValue < 0) {\n    thisValue = 0;\n  }\n\n  zrUtil.isArray(dataNode.value) ? dataNode.value[0] = thisValue : dataNode.value = thisValue;\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// var PI2 = Math.PI * 2;\nvar RADIAN = Math.PI / 180;\n\nfunction _default(seriesType, ecModel, api, payload) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var center = seriesModel.get('center');\n    var radius = seriesModel.get('radius');\n\n    if (!zrUtil.isArray(radius)) {\n      radius = [0, radius];\n    }\n\n    if (!zrUtil.isArray(center)) {\n      center = [center, center];\n    }\n\n    var width = api.getWidth();\n    var height = api.getHeight();\n    var size = Math.min(width, height);\n    var cx = parsePercent(center[0], width);\n    var cy = parsePercent(center[1], height);\n    var r0 = parsePercent(radius[0], size / 2);\n    var r = parsePercent(radius[1], size / 2);\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var virtualRoot = seriesModel.getData().tree.root;\n    var treeRoot = seriesModel.getViewRoot();\n    var rootDepth = treeRoot.depth;\n    var sort = seriesModel.get('sort');\n\n    if (sort != null) {\n      initChildren(treeRoot, sort);\n    }\n\n    var validDataCount = 0;\n    zrUtil.each(treeRoot.children, function (child) {\n      !isNaN(child.getValue()) && validDataCount++;\n    });\n    var sum = treeRoot.getValue(); // Sum may be 0\n\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var renderRollupNode = treeRoot.depth > 0;\n    var levels = treeRoot.height - (renderRollupNode ? -1 : 1);\n    var rPerLevel = (r - r0) / (levels || 1);\n    var clockwise = seriesModel.get('clockwise');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // In the case some sector angle is smaller than minAngle\n    // var restAngle = PI2;\n    // var valueSumLargerThanMinAngle = 0;\n\n    var dir = clockwise ? 1 : -1;\n    /**\n     * Render a tree\n     * @return increased angle\n     */\n\n    var renderNode = function (node, startAngle) {\n      if (!node) {\n        return;\n      }\n\n      var endAngle = startAngle; // Render self\n\n      if (node !== virtualRoot) {\n        // Tree node is virtual, so it doesn't need to be drawn\n        var value = node.getValue();\n        var angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n\n        if (angle < minAngle) {\n          angle = minAngle; // restAngle -= minAngle;\n        } // else {\n        //     valueSumLargerThanMinAngle += value;\n        // }\n\n\n        endAngle = startAngle + dir * angle;\n        var depth = node.depth - rootDepth - (renderRollupNode ? -1 : 1);\n        var rStart = r0 + rPerLevel * depth;\n        var rEnd = r0 + rPerLevel * (depth + 1);\n        var itemModel = node.getModel();\n\n        if (itemModel.get('r0') != null) {\n          rStart = parsePercent(itemModel.get('r0'), size / 2);\n        }\n\n        if (itemModel.get('r') != null) {\n          rEnd = parsePercent(itemModel.get('r'), size / 2);\n        }\n\n        node.setLayout({\n          angle: angle,\n          startAngle: startAngle,\n          endAngle: endAngle,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: rStart,\n          r: rEnd\n        });\n      } // Render children\n\n\n      if (node.children && node.children.length) {\n        // currentAngle = startAngle;\n        var siblingAngle = 0;\n        zrUtil.each(node.children, function (node) {\n          siblingAngle += renderNode(node, startAngle + siblingAngle);\n        });\n      }\n\n      return endAngle - startAngle;\n    }; // Virtual root node for roll up\n\n\n    if (renderRollupNode) {\n      var rStart = r0;\n      var rEnd = r0 + rPerLevel;\n      var angle = Math.PI * 2;\n      virtualRoot.setLayout({\n        angle: angle,\n        startAngle: startAngle,\n        endAngle: startAngle + angle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: rStart,\n        r: rEnd\n      });\n    }\n\n    renderNode(treeRoot, startAngle);\n  });\n}\n/**\n * Init node children by order and update visual\n *\n * @param {TreeNode} node  root node\n * @param {boolean}  isAsc if is in ascendant order\n */\n\n\nfunction initChildren(node, isAsc) {\n  var children = node.children || [];\n  node.children = sort(children, isAsc); // Init children recursively\n\n  if (children.length) {\n    zrUtil.each(node.children, function (child) {\n      initChildren(child, isAsc);\n    });\n  }\n}\n/**\n * Sort children nodes\n *\n * @param {TreeNode[]}               children children of node to be sorted\n * @param {string | function | null} sort sort method\n *                                   See SunburstSeries.js for details.\n */\n\n\nfunction sort(children, sortOrder) {\n  if (typeof sortOrder === 'function') {\n    return children.sort(sortOrder);\n  } else {\n    var isAsc = sortOrder === 'asc';\n    return children.sort(function (a, b) {\n      var diff = (a.getValue() - b.getValue()) * (isAsc ? 1 : -1);\n      return diff === 0 ? (a.dataIndex - b.dataIndex) * (isAsc ? -1 : 1) : diff;\n    });\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nrequire(\"./sunburst/SunburstSeries\");\n\nrequire(\"./sunburst/SunburstView\");\n\nrequire(\"./sunburst/sunburstAction\");\n\nvar dataColor = require(\"../visual/dataColor\");\n\nvar sunburstLayout = require(\"./sunburst/sunburstLayout\");\n\nvar dataFilter = require(\"../processor/dataFilter\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\necharts.registerVisual(zrUtil.curry(dataColor, 'sunburst'));\necharts.registerLayout(zrUtil.curry(sunburstLayout, 'sunburst'));\necharts.registerProcessor(zrUtil.curry(dataFilter, 'sunburst'));"],"sourceRoot":""}